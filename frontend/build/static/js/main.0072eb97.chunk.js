(this["webpackJsonpspell-client"]=this["webpackJsonpspell-client"]||[]).push([[0],{184:function(e,t,n){},185:function(e,t,n){},223:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(14),s=n.n(i),r=n(25),o=(n(184),n(6)),l=(n(185),n(19));"http://3.223.225.244:8000".includes("8000")?console.log("ENDPOINT: Local host"):console.log("ENDPOINT: Heroku");var d,j="http://3.223.225.244:8000",u="token-storage-key",h=n(141),b={saveAuthToken:function(e){window.localStorage.setItem(u,e)},getAuthToken:function(){return window.localStorage.getItem(u)},clearAuthToken:function(){console.info("clearing the auth token"),window.localStorage.removeItem(u)},hasAuthToken:function(){return!!b.getAuthToken()},makeBasicAuthToken:function(e,t){return window.btoa("".concat(e,":").concat(t))},parseJwt:function(e){return Object(h.a)(e)},readJwtToken:function(){return b.parseJwt(b.getAuthToken())},_getMsUntilExpiry:function(e){return 1e3*e.exp-Date.now()},queueCallbackBeforeExpiry:function(e){var t=b._getMsUntilExpiry(b.readJwtToken());d=setTimeout(e,t-1e4)},clearCallbackBeforeExpiry:function(){clearTimeout(d)}},p=b,O={postUser:function(e){return fetch("".concat(j,"/signup"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},postLogin:function(e){var t=e.username,n=e.password;return fetch("".concat(j,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:t,password:n})}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(e){return p.saveAuthToken(e.authToken),p.queueCallbackBeforeExpiry((function(){O.postRefreshToken()})),e}))},postRefreshToken:function(){return fetch("".concat(j,"/auth/refresh"),{method:"POST",headers:{authorization:"Bearer ".concat(p.getAuthToken())}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(e){return p.saveAuthToken(e.authToken),p.queueCallbackBeforeExpiry((function(){O.postRefreshToken()})),e})).catch((function(e){console.error(e)}))}},f=O,x=n(310),m=n(276),g=n(278),v=n(307),y=n(282),C=n(102),w=n.n(C),k=n(48),N=n(277),S=n(273),I=n(275),T=n(12),P=n(270),D=n(10),B=n(110),A=Object(P.a)((function(e){var t;return t={fab:{position:"absolute",bottom:e.spacing(4),right:e.spacing(4)},search:Object(T.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(D.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(D.c)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(T.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}}),icons:{width:"32px",textAlign:"center"},title:{display:"flex",flex:"1 1 100%"},pagi:{marginTop:"8px",display:"flex",justifyContent:"center"},container:{maxHeight:"70vh"},headBar:{justifyContent:"space-between",fontSize:"1.5rem",display:"inline-flex",width:"auto",fontFamily:"Roboto",fontWeight:"400",lineHeight:"1.334",letterSpacing:"0em",color:"#3f51b5"},headLeft:{flexGrow:"5",display:"inline-flex"},headTitle:{flexGrow:"3",display:"inline-flex"},headRight:{flexGrow:"1",width:"120px",display:"inline-flex",justifyContent:"flex-end"},instanceChartRoot:{width:"100%"},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},codeMirror:{height:"60vh",width:"29vw"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},searchField:{width:"114px"},searchFieldHidden:{width:"0px"},copy:{justifyContent:"center",width:"14ch"},cardHead:{display:"flex",justifyContent:"center"},popover:{pointerEvents:"none",justifyContent:"center",width:"100%",padding:e.spacing(1)},paper:{padding:e.spacing(1)},instanceDetailsDescription:{margin:e.spacing(1),width:"100%",justifyContent:"left"},spinner:{display:"flex","& > * + *":{marginRight:e.spacing(2)}},iconRow:{display:"flex",justifyContent:"flex-start"},instanceDetailsTitle:{margin:e.spacing(1),width:"33%",justifyContent:"left"},instanceDetailsIcons:{width:"33%",display:"flex",justifyContent:"end"},nameImageIcons:{display:"flex",justifyContent:"flex-start",width:"33%"},iconBox:{display:"flex",justifyContent:"flex-end",width:"33%",height:"20%"},instanceDetailsImage:{display:"flex",justifyContent:"center"},tagField:{width:"33%",display:"flex",justifyContent:"center"},tagLine:{margin:"8px"},instanceDetailsTooltip:{display:"flex"},iconBut:{display:"flex",margin:e.spacing(1),justifyContent:"left"},titleRow:{display:"flex",justifyContent:"center"},metaSpinner:{width:"33%",display:"flex",justifyContent:"flex-end"},metaTitle:{width:"33%"},metaID:{width:"33%",textAlign:"left"},instanceDetailsCodeMirror:{height:"500px"},instanceDetailsLocked:{pointerEvents:"none"},headerRoot:{flexGrow:1},headerTitle:{flexGrow:1},landingIntro:{width:"700px",textAlign:"center",margin:"auto"},landingDisplay:{width:"100%",textAlign:"center"},loginFormPaper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},loginFormAvatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},loginFormForm:{width:"100%",marginTop:e.spacing(1)},loginFormSubmit:{margin:e.spacing(3,0,2)},publicInstancesRoot:{"& > *":{marginTop:e.spacing(2),display:"flex",justifyContent:"center"}}},Object(T.a)(t,"headBar",{justifyContent:"space-between",fontSize:"1.5rem",display:"inline-flex",width:"auto",fontFamily:"Roboto",fontWeight:"400",lineHeight:"1.334",letterSpacing:"0em",color:"#3f51b5"}),Object(T.a)(t,"headLeft",{flexGrow:"5",display:"inline-flex"}),Object(T.a)(t,"headTitle",{flexGrow:"3",display:"inline-flex"}),Object(T.a)(t,"headRight",{flexGrow:"1",width:"120px",display:"inline-flex",justifyContent:"flex-end"}),Object(T.a)(t,"signupFormPaper",{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"}),Object(T.a)(t,"signupFormAvatar",{margin:e.spacing(1),backgroundColor:e.palette.secondary.main}),Object(T.a)(t,"signupFormForm",{width:"100%",marginTop:e.spacing(3)}),Object(T.a)(t,"signupFormSubmit",{margin:e.spacing(3,0,2)}),Object(T.a)(t,"instanceCardExpand",{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})}),Object(T.a)(t,"instanceCardExpandOpen",{transform:"rotate(180deg)"}),Object(T.a)(t,"instanceCardAvatar",{backgroundColor:B.a[500]}),Object(T.a)(t,"instanceCardChip",{flexDirection:"row",display:"flex",flexWrap:"wrap"}),Object(T.a)(t,"instanceCardCard",{height:"100%",display:"flex",flexDirection:"column"}),Object(T.a)(t,"instanceCardCardMedia",{paddingTop:"56.25%",color:"blue"}),Object(T.a)(t,"codeMirror",{height:"60vh",width:"29vw"}),Object(T.a)(t,"copy",{justifyContent:"center",width:"14ch"}),Object(T.a)(t,"cardHead",{display:"flex",justifyContent:"center"}),Object(T.a)(t,"instanceCardFooter",{display:"flex",justifyContent:"space-between"}),Object(T.a)(t,"instanceCardPopover",{pointerEvents:"none"}),Object(T.a)(t,"instanceCardPaper",{padding:e.spacing(1)}),Object(T.a)(t,"userProfileRoot",{"& > *":{marginTop:e.spacing(2),display:"flex",justifyContent:"center"}}),Object(T.a)(t,"userProfileHeadBar",{justifyContent:"space-between",fontSize:"1.5rem",display:"inline-flex",width:"auto",fontFamily:"Roboto",fontWeight:"400",lineHeight:"1.334",letterSpacing:"0em",color:"#3f51b5"}),Object(T.a)(t,"userProfileHeadLeft",{flexGrow:"5",display:"inline-flex"}),Object(T.a)(t,"userProfileHeadTitle",{flexGrow:"3",display:"inline-flex"}),Object(T.a)(t,"userProfileHeadRight",{flexGrow:"1",width:"120px",display:"inline-flex",justifyContent:"flex-end"}),Object(T.a)(t,"listIcon",{backgroundColor:"rgb(100,149,237)"}),t})),F=n(1),L=function(e){var t=A();return Object(F.jsx)("div",{className:t.headerRoot,children:Object(F.jsx)(S.a,{position:"static",children:Object(F.jsxs)(I.a,{children:[Object(F.jsx)(k.a,{variant:"h6",className:t.headerTitle}),Object(F.jsx)(m.a,{color:"inherit",onClick:function(){e.history.push("/signup")},children:"Create Account"}),Object(F.jsx)(m.a,{color:"inherit",onClick:function(){e.history.push("/login")},children:"Login"})]})})})};L.defaultProps={location:{},history:{push:function(){}}};var E=L,R=function(e){var t=A(),n=c.a.createRef(),i=c.a.createRef(),s=Object(a.useState)(null),d=Object(o.a)(s,2),j=d[0],u=d[1],h=function(){e.history.push("/instances")};return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(l.b,{path:"/",component:E}),Object(F.jsxs)(N.a,{component:"main",maxWidth:"xs",children:[Object(F.jsx)(g.a,{}),Object(F.jsxs)("div",{className:t.loginFormPaper,children:[Object(F.jsx)(x.a,{className:t.loginFormAvatar,children:Object(F.jsx)(w.a,{})}),Object(F.jsx)(k.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(F.jsxs)("form",{className:t.loginFormForm,noValidate:!0,children:[Object(F.jsx)(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,inputRef:n}),Object(F.jsx)(v.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",inputRef:i}),Object(F.jsx)("div",{role:"alert",children:j?Object(F.jsx)("p",{className:"red",children:j}):null}),Object(F.jsx)(m.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.loginFormSubmit,onClick:function(e){return function(e){e.preventDefault(),f.postLogin({username:n.current.value,password:i.current.value}).then((function(e){n.current.value="",i.current.value="",h()})).catch((function(e){u(e.error)}))}(e)},children:"Sign In"}),Object(F.jsxs)(y.a,{container:!0,children:[Object(F.jsx)(y.a,{item:!0,xs:!0}),Object(F.jsx)(y.a,{item:!0,children:Object(F.jsx)(r.b,{to:"/signup",variant:"body2",children:"Don't have an account? Sign Up"})})]})]})]})]})]})};R.defaultProps={location:{},history:{push:function(){}}};var M=R,z=function(e){var t=A(),n=c.a.createRef(),i=c.a.createRef(),s=c.a.createRef(),d=Object(a.useState)(null),j=Object(o.a)(d,2),u=j[0],h=j[1],b=function(){e.history.push("/login")};return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(l.b,{path:"/",component:E}),Object(F.jsxs)(N.a,{component:"main",maxWidth:"xs",children:[Object(F.jsx)(g.a,{}),Object(F.jsxs)("div",{className:t.signupFormPaper,children:[Object(F.jsx)(x.a,{className:t.signupFormAvatar,children:Object(F.jsx)(w.a,{})}),Object(F.jsx)(k.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(F.jsxs)("form",{className:t.signupFormForm,noValidate:!0,children:[Object(F.jsxs)(y.a,{container:!0,spacing:2,children:[Object(F.jsx)(y.a,{item:!0,xs:12,children:Object(F.jsx)(v.a,{variant:"outlined",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",inputRef:n})}),Object(F.jsx)(y.a,{item:!0,xs:12,children:Object(F.jsx)(v.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",inputRef:i})}),Object(F.jsx)(y.a,{item:!0,xs:12,children:Object(F.jsx)(v.a,{variant:"outlined",required:!0,fullWidth:!0,name:"confirm-password",label:"Confirm Password",type:"password",id:"confirm-password",autoComplete:"current-password",inputRef:s})})]}),Object(F.jsx)("div",{role:"alert",children:u?Object(F.jsx)("p",{className:"red",children:u}):null}),Object(F.jsx)(m.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.signupFormSubmit,onClick:function(e){return function(e){e.preventDefault(),i.current.value===s.current.value?f.postUser({username:n.current.value,password:i.current.value}).then((function(e){n.current.value="",i.current.value="",s.current.value="",b()})).catch((function(e){h(e.error)})):h("Password do not match")}(e)},children:"Sign Up"}),Object(F.jsx)(y.a,{container:!0,justify:"flex-end",children:Object(F.jsx)(y.a,{item:!0,children:Object(F.jsx)(r.b,{to:"/login",variant:"body2",children:"Already have an account? Sign in"})})})]})]})]})]})};z.defaultProps={location:{},history:{push:function(){}}};var U=z,H=function(e){var t=Object(l.g)(),n=A();return e.isLoggedIn&&t.push("/instances"),Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(l.b,{path:"/",component:E}),Object(F.jsxs)("div",{className:n.landingDisplay,children:[Object(F.jsx)("div",{children:Object(F.jsx)("h1",{children:"CodeSpells Spells Sharing"})}),Object(F.jsxs)("div",{className:n.landingIntro,children:[Object(F.jsx)("p",{children:"Welcome to the CodeSpells Spell Sharing Server!"}),Object(F.jsxs)("p",{children:["Witches and wizards can use this Spells Sharing Server to save, organize, and share their favorite spells. Spells made public on this server can be executed on our ",Object(F.jsx)("a",{href:"https://www.twitch.tv/codespells",children:"live Twitch dev stream "}),"by typing ",Object(F.jsx)("code",{children:"!!run <spell-id>"}),"  into chat after spawning a mini with ",Object(F.jsx)("code",{children:"!!mini"}),"."]}),Object(F.jsxs)("p",{children:["To find a current list of functions that can be executed in the CodeSpells Twitch chat, check out the documentation ",Object(F.jsx)("a",{href:"https://docs.racket-lang.org/codespells-live/index.html",children:"here"}),"."]}),Object(F.jsxs)("p",{children:["The Spell Sharing Server is still under development. Bugs can be reported in the Github repository ",Object(F.jsx)("a",{href:"https://github.com/srfoster/codespells-spell-sharing-front-end",children:"here"}),"."]}),Object(F.jsx)(r.b,{to:"/signup",children:Object(F.jsx)(m.a,{variant:"contained",color:"primary",children:"Create Account"})})]})]})]})},W=n(31),G=n(8),V=n(293),_=n(294),J=n(286),q=n(285);function K(e){return Object(F.jsx)(k.a,{component:"h2",variant:"h5",color:"primary",gutterBottom:!0,children:e.children})}var Y=n(283),Z=n(144),Q=n.n(Z),X=n(105),$=n.n(X),ee=n(106),te=n.n(ee),ne=n(107),ae=n.n(ne),ce=n(287),ie=n(291),se=n(289),re=n(290),oe=n(288),le=n(311),de={getPublicInstances:function(e,t){return fetch("".concat(j,"/gallery?page=").concat(e,"&search=").concat(t),{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},getInstanceById:function(e){return fetch("".concat(j,"/instances/").concat(e),{method:"GET",headers:{"content-type":"application/json",authorization:"bearer ".concat(p.getAuthToken())}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},getPublicInstanceById:function(e){return fetch("".concat(j,"/public-instance/").concat(e),{method:"GET",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},getInstancesByUser:function(e,t,n,a,c){return fetch("".concat(j,"/instances?page=").concat(t,"&search=").concat(n,"&sort=").concat(c,"&sortDirection=").concat(a),{method:"GET",headers:{"content-type":"application/json",authorization:"bearer ".concat(p.getAuthToken())}}).then((function(t){return t.ok?t.json():t.json().then((function(t){e&&e.push("/gallery")}))}))},getUserById:function(e,t,n){t=t||1;var a=n?"&search=".concat(n):"";return fetch("".concat(j,"/mages/").concat(e,"?page=").concat(t).concat(a),{method:"GET",headers:{"content-type":"application/json",authorization:"bearer ".concat(p.getAuthToken())}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},postNewInstance:function(e){return fetch("".concat(j,"/instances?title=").concat(e),{method:"POST",headers:{"content-type":"application/json",authorization:"bearer ".concat(p.getAuthToken())}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},forkInstanceById:function(e){return fetch("".concat(j,"/instances/").concat(e,"/fork"),{method:"POST",headers:{"content-type":"application/json",authorization:"bearer ".concat(p.getAuthToken())}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},deleteInstances:function(e){return e="number"===typeof e?e:e.join(","),fetch("".concat(j,"/instances/").concat(e),{method:"DELETE",headers:{"content-type":"application/json",authorization:"bearer ".concat(p.getAuthToken())}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},updateInstance:function(e,t){return fetch("".concat(j,"/instances/").concat(t),{method:"PUT",headers:{"content-type":"application/json",authorization:"bearer ".concat(p.getAuthToken())},body:JSON.stringify(e)}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))},checkForInstanceOwnership:function(e){return fetch("".concat(j,"/check-ownership/").concat(e),{method:"GET",headers:{"content-type":"application/json",authorization:"bearer ".concat(p.getAuthToken())}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}},je=n(142),ue=n.n(je),he=n(314),be=n(3);function pe(e,t){return e?e.length>t?e.slice(0,t)+"...":e:""}function Oe(e){var t=A(),n=c.a.useState(!0),a=Object(o.a)(n,2),i=a[0],s=a[1];return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(he.a,{className:Object(be.a)(t.searchField,i&&t.searchFieldHidden),placeholder:"Search Instances",onChange:function(t){e.setSearch(t.target.value),e.setCurrentPage(1)},inputProps:{"aria-label":"search"}}),Object(F.jsx)(Y.a,{onClick:function(e){s(!i)},children:Object(F.jsx)(ue.a,{})})]})}var fe=n(308),xe=n(292),me=n(309),ge=n(312),ve=n(74),ye=n.n(ve),Ce=n(56),we=n(75),ke=n.n(we),Ne=n(279),Se=n(284),Ie=n(315),Te=[{id:"Created",numeric:!1,disablePadding:!0,label:"Created"},{id:"Modified",numeric:!1,disablePadding:!0,label:"Modified"},{id:"Name",numeric:!1,disablePadding:!0,label:"Name"},{id:"Description",numeric:!1,disablePadding:!1,label:"Description"},{id:"Tags",numeric:!1,disablePadding:!1,label:"Tags"},{id:"Code",numeric:!1,disablePadding:!0,label:"Code"},{id:"Edit",numeric:!1,disablePadding:!0,label:"Edit"},{id:"Public",numeric:!1,disablePadding:!0,label:"Public"}];function Pe(e){var t=e.classes,n=e.onSelectAllClick,a=e.sortDirection,c=e.orderBy,i=e.numSelected,s=e.onRequestSort,r=e.instances,o=e.instancesPerPage;return Object(F.jsx)(Se.a,{children:Object(F.jsxs)(q.a,{children:[Object(F.jsx)(J.a,{padding:"checkbox",children:Object(F.jsx)(me.a,{indeterminate:i>0&&i<o,checked:r.length>0&&i===Math.min(r.length,o),onChange:n,inputProps:{"aria-label":"select all desserts"}})}),Te.map((function(e){return Object(F.jsx)(J.a,{align:e.numeric?"right":"left",padding:e.disablePadding?"none":"default",sortDirection:c===e.id&&a,children:"Tags"!==e.id&&"Code"!==e.id&&"Edit"!==e.id?Object(F.jsxs)(Ie.a,{active:c===e.id,direction:c===e.id?a:"asc",onClick:(n=e.id,function(e){s(e,n)}),children:[e.label,c===e.id?Object(F.jsx)("span",{className:t.visuallyHidden,children:"desc"===a?"sorted descending":"sorted ascending"}):null]}):e.id},e.id);var n}))]})})}n(94),n(95),n(96);function De(e){var t=A(),n=Object(l.g)(),a=c.a.useState(!1),i=Object(o.a)(a,2),s=i[0],r=i[1],d=c.a.useState(10),j=Object(o.a)(d,2),u=j[0],h=(j[1],c.a.useState(!1)),b=Object(o.a)(h,2),p=b[0],O=b[1],f=c.a.useState([]),x=Object(o.a)(f,2),g=x[0],y=x[1],C=c.a.useState(null),w=Object(o.a)(C,2),N=w[0],S=w[1],P=c.a.useState("Click To Copy"),D=Object(o.a)(P,2),B=D[0],L=D[1],E=Boolean(N),R=function(e){return"!!run "+e},M=function(e){O(e)},z=function(){r(!1)};var U=function(e){S(e.currentTarget)},H=function(){S(null),L("Click To Copy")};return e.instances?Object(F.jsxs)(c.a.Fragment,{children:[Object(F.jsxs)("div",{className:t.headBar,children:[Object(F.jsx)("div",{className:t.headLeft}),Object(F.jsx)("div",{className:t.headTitle,children:"My Instances"}),Object(F.jsx)("div",{className:t.headRight,children:Object(F.jsx)(Oe,{setSearch:e.setSearch})})]}),Object(F.jsxs)(I.a,{className:Object(be.a)(t.instanceChartRoot,Object(T.a)({},t.highlight,g.length>0)),children:[g.length>0?Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(le.a,{title:"Delete",children:Object(F.jsx)(Y.a,{"aria-label":"delete",onClick:function(){r(!0)},children:Object(F.jsx)($.a,{})})}),Object(F.jsxs)(ce.a,{open:s,onClose:function(){return z()},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(F.jsx)(oe.a,{id:"alert-dialog-title",children:"Delete instance?"}),Object(F.jsx)(se.a,{children:Object(F.jsx)(re.a,{id:"alert-dialog-description",children:"Are you sure you would like to delete this instance?"})}),Object(F.jsxs)(ie.a,{children:[Object(F.jsx)(m.a,{onClick:function(){z(),de.deleteInstances(g).then((function(t){e.setRefresh(Math.random()),y([])}))},color:"secondary",children:"Delete"}),Object(F.jsx)(m.a,{onClick:z,color:"primary",autoFocus:!0,children:"Keep"})]})]})]}):Object(F.jsx)(k.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div"}),g.length>0?Object(F.jsxs)(k.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div",children:[g.length," selected"]}):Object(F.jsx)(k.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div"})]}),Object(F.jsx)(xe.a,{className:t.container,children:Object(F.jsxs)(V.a,{size:"small",padding:"none",stickyHeader:!0,"aria-label":"sticky table",children:[Object(F.jsx)(Pe,{classes:t,numSelected:g.length,sortDirection:e.sortDirection,orderBy:e.orderBy,onSelectAllClick:function(t,n){if(t.target.checked){var a=e.instances.map((function(e){return e.id}));y(a)}else y([])},onRequestSort:function(t,n){var a=e.orderBy.toLowerCase()===n.toLowerCase()&&"asc"===e.sortDirection;e.setSortDirection(a?"desc":"asc"),e.setOrderBy(n.toLowerCase())},instances:e.instances,instancesPerPage:u}),Object(F.jsx)(_.a,{children:e.instances.map((function(a){return Object(F.jsxs)(q.a,{hover:!0,onClick:function(e){return function(e,t){var n=t.id,a=g.indexOf(n),c=[];-1===a?c=c.concat(g,n):0===a?c=c.concat(g.slice(1)):a===g.length-1?c=c.concat(g.slice(0,-1)):a>0&&(c=c.concat(g.slice(0,a),g.slice(a+1))),y(c)}(0,a)},selected:-1!==g.indexOf(a.id),children:[Object(F.jsx)(J.a,{padding:"checkbox",children:a.locked?"":Object(F.jsx)(me.a,{checked:(c=a.id,-1!==g.indexOf(c))})}),Object(F.jsx)(le.a,{title:new Date(Date.parse(a.date_created)).toLocaleTimeString(),arrow:!0,placement:"bottom-start",children:Object(F.jsx)(J.a,{children:new Date(Date.parse(a.date_created)).toLocaleDateString()})}),Object(F.jsx)(le.a,{title:new Date(Date.parse(a.date_modified)).toLocaleTimeString(),arrow:!0,placement:"bottom-start",children:Object(F.jsx)(J.a,{children:new Date(Date.parse(a.date_modified)).toLocaleDateString()})}),Object(F.jsx)(J.a,{children:pe(a.name,15)}),Object(F.jsx)(J.a,{children:pe(a.description,30)}),Object(F.jsx)(J.a,{width:"40%",children:a.tags.length?a.tags.map((function(e){return Object(F.jsx)(ge.a,{variant:"outlined",size:"small",label:e.name,onClick:function(e){e.stopPropagation()}},e.id)})):""}),Object(F.jsxs)(J.a,{className:t.icons,children:[Object(F.jsx)(Y.a,{className:Object(be.a)(t.expand,Object(T.a)({},t.expandOpen,p==a.id)),onClick:function(e){M(a.id),e.stopPropagation()},"aria-expanded":p==a.id,"aria-label":"show more",children:Object(F.jsx)(le.a,{title:"View Code",placement:"top",children:Object(F.jsx)(ye.a,{})})}),Object(F.jsxs)(ce.a,{open:p==a.id,onClose:function(e){M(!1)},onClick:function(e){e.stopPropagation()},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(F.jsx)("div",{className:t.cardHead,children:Object(F.jsx)(oe.a,{id:"alert-dialog-title",children:"".concat(a.name)})}),Object(F.jsxs)("div",{className:t.cardHead,children:[Object(F.jsx)(v.a,{size:"small",className:t.copy,id:"read-only-twitch-command",label:"Twitch Dictum",defaultValue:R(a.id),InputProps:{readOnly:!0},variant:"outlined","aria-owns":E?"mouse-over-popover":void 0,"aria-haspopup":"true",onMouseEnter:U,onMouseLeave:H,onClick:function(){navigator.clipboard.writeText(R(a.id)),L("Copied!")}}),Object(F.jsx)(Ne.a,{id:"mouse-over-popover",className:t.popover,classes:{paper:t.paper},open:E,anchorEl:N,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:H,disableRestoreFocus:!0,children:Object(F.jsx)(k.a,{children:B})})]}),Object(F.jsxs)(se.a,{className:"dialogBox",children:[Object(F.jsx)(re.a,{id:"CodeMirror-Display",children:Object(F.jsx)(Ce.UnControlled,{className:t.codeMirror,value:a.text,options:{lineWrapping:!0,mode:"scheme",theme:"material",lineNumbers:!0,matchBrackets:!0,autoCloseBrackets:!0,styleActiveLine:!0}})}),"Edited code will not be saved"]})]})]}),Object(F.jsx)(F.Fragment,{children:a.locked?Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(J.a,{className:t.icons}),Object(F.jsx)(J.a,{className:t.icons,children:Object(F.jsx)(ke.a,{})})]}):Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(J.a,{className:t.icons,children:Object(F.jsx)(Y.a,{"aria-label":"edit",onClick:function(){return n.push("/instances/".concat(a.id))},children:Object(F.jsx)(Q.a,{})})}),Object(F.jsx)(J.a,{className:t.icons,children:Object(F.jsx)(Y.a,{id:a.id,"aria-label":"isPublic",onClick:function(t){!function(t){var n=t;de.updateInstance(n,t.id).then((function(t){e.onChange(t)}))}(Object(G.a)(Object(G.a)({},a),{},{is_public:!a.is_public})),t.stopPropagation()},children:a.is_public?Object(F.jsx)(te.a,{}):Object(F.jsx)(ae.a,{})})})]})})]},"Key: "+a.id);var c}))})]})}),Object(F.jsx)("div",{className:t.pagi,children:Object(F.jsx)(fe.a,{count:Math.ceil(e.totalInstances/u),onChange:function(t,n){e.setCurrentPage(n),y([])}})})]}):""}var Be=n(281),Ae=n(298),Fe=n(111),Le=n(151),Ee=n.n(Le),Re=n(152),Me=n.n(Re),ze=n(295),Ue=n(296),He=n(297),We=n(146),Ge=n.n(We),Ve=n(148),_e=n.n(Ve),Je=n(125),qe=n.n(Je),Ke=n(149),Ye=n.n(Ke),Ze=n(150),Qe=n.n(Ze),Xe=n(147),$e=n.n(Xe),et=n(145),tt=n.n(et);function nt(e){var t=A(),n=Object(l.g)(),a=function(e){"/login"===e&&p.clearAuthToken(),n.push(e)},c=window.location.pathname;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)("div",{children:[Object(F.jsxs)(ze.a,{button:!0,onClick:function(){return a("/instances/5/views/video-call")},className:"/video-call"===c?t.listIcon:"",children:[Object(F.jsx)(Ue.a,{children:Object(F.jsx)(ye.a,{})}),Object(F.jsx)(He.a,{primary:"Instance VideoChat"})]}),Object(F.jsxs)(ze.a,{button:!0,onClick:function(){return a("/instances")},className:"/instances"===c?t.listIcon:"",children:[Object(F.jsx)(Ue.a,{children:Object(F.jsx)(tt.a,{})}),Object(F.jsx)(He.a,{primary:"My Instances"})]}),Object(F.jsxs)(ze.a,{button:!0,onClick:function(){return a("/friends")},className:"/friends"===c?t.listIcon:"",children:[Object(F.jsx)(Ue.a,{children:Object(F.jsx)(Ge.a,{})}),Object(F.jsx)(He.a,{primary:"Friends"})]}),Object(F.jsxs)(ze.a,{button:!0,onClick:function(){return a("/gallery")},className:"/gallery"===c?t.listIcon:"",children:[Object(F.jsx)(Ue.a,{children:Object(F.jsx)(qe.a,{})}),Object(F.jsx)(He.a,{primary:"Public Instances"})]})]}),Object(F.jsx)(Ae.a,{}),Object(F.jsxs)("div",{children:[Object(F.jsxs)(ze.a,{button:!0,onClick:function(){return a("/mages/me")},className:c.includes("/mages")?t.listIcon:"",children:[Object(F.jsx)(Ue.a,{children:Object(F.jsx)($e.a,{})}),Object(F.jsx)(He.a,{primary:"My Profile"})]}),Object(F.jsxs)(ze.a,{button:!0,onClick:function(){return a("/login")},children:[Object(F.jsx)(Ue.a,{children:Object(F.jsx)(_e.a,{})}),Object(F.jsx)(He.a,{primary:"Logout"})]})]})]})}function at(){var e=A(),t=Object(l.g)(),n=window.location.pathname;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("div",{children:Object(F.jsxs)(ze.a,{button:!0,onClick:function(){return function(e){t.push(e),"/login"===e&&p.clearAuthToken()}("/gallery")},className:"/gallery"===n?e.listIcon:"",children:[Object(F.jsx)(Ue.a,{children:Object(F.jsx)(qe.a,{})}),Object(F.jsx)(He.a,{primary:"Public Instances"})]})}),Object(F.jsx)(Ae.a,{}),Object(F.jsxs)("div",{children:[Object(F.jsxs)(ze.a,{button:!0,onClick:function(){return t.push("/login")},children:[Object(F.jsx)(Ue.a,{children:Object(F.jsx)(Ye.a,{})}),Object(F.jsx)(He.a,{primary:"Login"})]}),Object(F.jsxs)(ze.a,{button:!0,onClick:function(){return t.push("/signup")},children:[Object(F.jsx)(Ue.a,{children:Object(F.jsx)(Qe.a,{})}),Object(F.jsx)(He.a,{primary:"Signup"})]})]})]})}var ct=n(313),it=n.p+"static/media/CodeSpells.963573e2.png",st=n(299);var rt=Object(P.a)((function(e){return{dashRoot:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(G.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},dashMenuButton:{marginRight:36},dashMenuButtonHidden:{display:"none"},dashTitle:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(T.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:Object(G.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),content:{flexGrow:1,height:"100vh",overflow:"auto"},dashContainer:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},dashPaper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240},link:{width:"10%"}}})),ot=function(e){var t=rt(),n=Object(a.useState)(void 0),i=Object(o.a)(n,2),s=i[0],r=i[1],l=c.a.useState(!1),d=Object(o.a)(l,2),j=d[0],u=d[1];return Object(be.a)(t.dashPaper,t.fixedHeight),Object(a.useEffect)((function(){de.getUserById("me").then((function(e){return r(!0)})).catch((function(){return r(!1)}))}),[]),void 0===s?"":Object(F.jsxs)("div",{className:t.dashRoot,children:[Object(F.jsx)(g.a,{}),Object(F.jsx)(S.a,{position:"absolute",className:Object(be.a)(t.appBar,j&&t.appBarShift),children:Object(F.jsxs)(I.a,{className:t.toolbar,children:[Object(F.jsx)(Y.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){u(!0)},className:Object(be.a)(t.dashMenuButton,j&&t.dashMenuButtonHidden),children:Object(F.jsx)(Ee.a,{})}),Object(F.jsx)(k.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:t.dashTitle}),Object(F.jsx)(st.a,{href:"https://codespells.org/index.html",className:t.link,children:Object(F.jsx)("img",{src:it,alt:"CodeSpells",width:"100%"})})]})}),Object(F.jsxs)(ct.a,{variant:"permanent",classes:{paper:Object(be.a)(t.drawerPaper,!j&&t.drawerPaperClose)},open:j,children:[Object(F.jsx)("div",{className:t.toolbarIcon,children:Object(F.jsx)(Y.a,{onClick:function(){u(!1)},children:Object(F.jsx)(Me.a,{})})}),Object(F.jsx)(Ae.a,{}),Object(F.jsx)(Be.a,{children:s?Object(F.jsx)(nt,{}):Object(F.jsx)(at,{})})]}),Object(F.jsxs)("main",{className:t.content,children:[Object(F.jsx)("div",{className:t.appBarSpacer}),Object(F.jsxs)(N.a,{maxWidth:"lg",className:t.dashContainer,children:[Object(F.jsx)(y.a,{container:!0,spacing:3,children:Object(F.jsx)(y.a,{item:!0,xs:12,children:Object(F.jsx)(Fe.a,{className:t.dashPaper,children:e.child})})}),s?e.fabIcon:""]})]})]})},lt=n(300),dt=n(154),jt=n.n(dt),ut=n(153),ht=n.n(ut);var bt=function(e){var t=A(),n=Object(l.g)(),a=new ht.a;return Object(F.jsx)(le.a,{title:"New Instance",placement:"top",children:Object(F.jsx)(lt.a,{color:"primary","aria-label":"add",className:t.fab,onClick:function(){return function(){var e=a.haikunate({tokenLength:0,delimiter:" "}).split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join(" ");console.log(e),de.postNewInstance(e).then((function(e){n.push("/instances/".concat(e.id))}))}()},children:Object(F.jsx)(jt.a,{})})})};var pt,Ot=function(e){var t=Object(a.useState)([]),n=Object(o.a)(t,2),i=n[0],s=n[1],r=Object(a.useState)(0),d=Object(o.a)(r,2),j=d[0],u=d[1],h=Object(a.useState)(1),b=Object(o.a)(h,2),p=b[0],O=b[1],f=Object(a.useState)(0),x=Object(o.a)(f,2),m=x[0],g=x[1],v=c.a.useState(""),y=Object(o.a)(v,2),C=y[0],w=y[1],k=c.a.useState("asc"),N=Object(o.a)(k,2),S=N[0],I=N[1],T=c.a.useState(""),P=Object(o.a)(T,2),D=P[0],B=P[1],A=Object(l.g)();function L(e){de.postNewInstance().then((function(e){s([].concat(Object(W.a)(e),[e]))}))}return Object(a.useEffect)((function(){de.getUserById("me").then((function(t){return e.setIsLoggedIn(!0)})).catch((function(){return e.setIsLoggedIn(!1)})),e.isLoggedIn&&de.getInstancesByUser(A,p,C,S,D).then((function(e){s(e.instances),u(e.total)}))}),[p,m,C,S,D,e,A]),Object(F.jsx)(ot,{instances:i,setInstances:s,createInstance:L,child:Object(F.jsx)(De,{setCurrentPage:O,setSearch:w,setSortDirection:I,sortDirection:S,orderBy:D,setOrderBy:B,instances:i,totalInstances:j,onChange:function(e){return s(i.map((function(t){return e.id===t.id?e:t})))},onDelete:function(e){return s(i.filter((function(t){return t.id!==e})))},setRefresh:g}),fabIcon:Object(F.jsx)(bt,{instances:i,setInstances:s,clickIcon:L})})},ft=n(301),xt=n(156),mt=n.n(xt),gt=(n(70),n(89)),vt=n.n(gt),yt=n(160).a.connect("ws://3.223.225.244:3001");function Ct(e){var t=Object(a.useState)(!0),n=Object(o.a)(t,2),c=n[0],i=n[1];return Object(a.useEffect)((function(){console.log("SUBSCRIBING"),yt.removeAllListeners("UPDATE instance/"+e.instanceId),yt.on("UPDATE instance/"+e.instanceId,(function(e){console.log(e),i(!1)}))}),[]),Object(F.jsxs)("p",{children:["Instance ",e.instanceId," is up-to-date: ",c?"fresh":"stale"]})}function wt(e){var t=A(),n=Object(l.g)(),i=Object(a.useState)(),s=Object(o.a)(i,2),r=s[0],d=s[1],u=Object(a.useState)(!1),h=Object(o.a)(u,2),b=h[0],O=h[1],f=Object(a.useState)(void 0),x=Object(o.a)(f,2),g=x[0],y=x[1],C=c.a.useState(!1),w=Object(o.a)(C,2),k=(w[0],w[1],c.a.useState(void 0)),N=Object(o.a)(k,2),S=N[0],I=N[1],T=c.a.useState(""),P=Object(o.a)(T,2),D=(P[0],P[1],c.a.useState("")),B=Object(o.a)(D,2),L=(B[0],B[1],Object(a.useState)("")),E=Object(o.a)(L,2),R=E[0],M=E[1],z=Object(a.useState)(),U=Object(o.a)(z,2),H=U[0],V=U[1],_=Object(a.useState)(null),J=Object(o.a)(_,2),q=J[0],Z=J[1],Q=2e3,X=function(e){I(void 0)},ee=Object(l.h)().id,ne=window.location.pathname;Object(a.useEffect)((function(){var e=!0;return de.checkForInstanceOwnership(ee).then((function(e){V(e.userOwnsInstance)})),de.getInstanceById(ee).then((function(t){e&&(d(t),y(t.text))})).catch((function(e){Z(e.error)})),function(){e=!1}}),[ne,ee]);var je=function(e,t){clearTimeout(pt),pt=setTimeout((function(){return e()}),t)},ue=function(e){O(!0);var t=e;return fetch("".concat(j,"/instances/").concat(ee),{method:"PUT",headers:{"content-type":"application/json",authorization:"bearer ".concat(p.getAuthToken())},body:JSON.stringify(t)}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(e){setTimeout((function(){O(!1)}),1e3),d(e)}))};var he=function(e){de.forkInstanceById(e).then((function(e){n.push("/instances/".concat(e.id))}))};return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(l.a,{when:b,message:"Instance is not saved yet"}),r?Object(F.jsxs)("div",{className:r.locked?t.instanceDetailsLocked:"",children:[Object(F.jsx)(Ct,{instanceId:r.id}),Object(F.jsxs)("div",{className:t.titleRow,children:[Object(F.jsxs)("div",{className:t.metaID,children:["ID: ",r.id]}),Object(F.jsx)("div",{className:t.metaTitle,children:Object(F.jsx)(K,{children:r.name})}),Object(F.jsx)("div",{className:t.metaSpinner,children:r.locked||!H?"":b?Object(F.jsx)("div",{className:t.spinner,children:Object(F.jsx)(ft.a,{size:30})}):Object(F.jsx)("div",{className:t.spinner,children:Object(F.jsx)(mt.a,{})})})]}),Object(F.jsx)("p",{}),Object(F.jsxs)("div",{className:t.iconRow,children:[r.locked||!H?Object(F.jsx)(v.a,{className:t.instanceDetailsTitle,label:"Name",defaultValue:r.name,disabled:!0}):Object(F.jsx)(v.a,{className:t.instanceDetailsTitle,label:"Name",defaultValue:r.name,onChange:function(e){d(Object(G.a)(Object(G.a)({},r),{},{name:e.target.value})),setTimeout((function(){je((function(){return ue(Object(G.a)(Object(G.a)({},r),{},{name:e.target.value}))}),Q)}),500)}}),Object(F.jsx)("div",{className:t.instanceDetailsImage,children:Object(F.jsx)("img",{src:"https://i.imgur.com/VE9Aksf.jpg",alt:"Instance Image",width:"40%"})}),Object(F.jsx)("div",{className:t.iconBox,children:r.locked||!H?Object(F.jsxs)("div",{className:t.instanceDetailsIcons,children:[Object(F.jsx)(le.a,{title:"Instance Locked",placement:"top",children:Object(F.jsx)(Y.a,{children:Object(F.jsx)(ke.a,{})})}),Object(F.jsx)(le.a,{title:"Fork Instance",placement:"top-end",children:Object(F.jsx)(Y.a,{onClick:function(){return he(r.id)},children:Object(F.jsx)(vt.a,{})})})]}):Object(F.jsxs)("div",{className:t.instanceDetailsIcons,children:[Object(F.jsx)(le.a,{title:"Fork Instance",placement:"top",children:Object(F.jsx)(Y.a,{onClick:function(){return he(r.id)},children:Object(F.jsx)(vt.a,{})})}),Object(F.jsx)(le.a,{title:"Public status",placement:"top-end",children:Object(F.jsx)(Y.a,{"aria-label":"isPublic",onClick:function(){d(Object(G.a)(Object(G.a)({},r),{},{is_public:!r.is_public})),je((function(){return ue(Object(G.a)(Object(G.a)({},r),{},{is_public:!r.is_public}))}),Q)},children:r.is_public?Object(F.jsx)(te.a,{}):Object(F.jsx)(ae.a,{})})}),Object(F.jsx)(le.a,{title:"Delete",placement:"top-end",children:Object(F.jsx)(Y.a,{"aria-label":"delete",onClick:function(){return function(e){I(e)}(r.id)},children:Object(F.jsx)($.a,{})})})]})})]}),Object(F.jsxs)(ce.a,{open:S===r.id,onClose:function(){return X(r.id)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(F.jsx)(oe.a,{id:"alert-dialog-title",children:"Delete instance?"}),Object(F.jsx)(se.a,{children:Object(F.jsx)(re.a,{id:"alert-dialog-description",children:"Are you sure you would like to delete this instance?"})}),Object(F.jsxs)(ie.a,{children:[Object(F.jsx)(m.a,{onClick:function(){X(),function(e){fetch("".concat(j,"/instances/").concat(e),{method:"DELETE",headers:{"content-type":"application/json",authorization:"bearer ".concat(p.getAuthToken())}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))}))}(r.id),n.push("/instances")},color:"secondary",children:"Delete"}),Object(F.jsx)(m.a,{onClick:X,color:"primary",autoFocus:!0,children:"Keep"})]})]}),Object(F.jsx)("div",{className:t.iconRow,children:r.locked||!H?Object(F.jsx)(v.a,{className:t.instanceDetailsDescription,label:"Description",defaultValue:r.description,disabled:!0}):Object(F.jsx)(v.a,{className:t.instanceDetailsDescription,label:"Description",defaultValue:r.description,onChange:function(e){d(Object(G.a)(Object(G.a)({},r),{},{description:e.target.value})),setTimeout((function(){je((function(){return ue(Object(G.a)(Object(G.a)({},r),{},{description:e.target.value}))}),Q)}),500)}})}),Object(F.jsx)("p",{}),Object(F.jsx)("div",{className:t.iconRow,children:r.lock||!H?Object(F.jsx)(v.a,{className:t.tagLine,placeholder:"Tag",value:R,label:"Instance Tags",disabled:!0}):Object(F.jsx)(v.a,{className:t.tagLine,placeholder:"Tag",onKeyUp:function(e){13===e.keyCode&&R&&(!function(e,t){fetch("".concat(j,"/instances/").concat(e,"/tags/").concat(t),{method:"POST",headers:{"content-type":"application/json",authorization:"bearer ".concat(p.getAuthToken())}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(e){O(!1),d(Object(G.a)(Object(G.a)({},r),{},{tags:[].concat(Object(W.a)(r.tags),[e])}))}))}(r.id,R),M(""))},value:R,label:"Instance Tags",onChange:function(e){M(e.target.value)}})}),r.locked||!H?Object(F.jsx)("div",{className:t.icon,children:r.tags.map((function(e){return Object(F.jsx)(ge.a,{variant:"outlined",size:"small",label:e.name},e.id)}))}):Object(F.jsx)("div",{className:t.icon,children:r.tags.map((function(e){return Object(F.jsx)(ge.a,{variant:"outlined",size:"small",label:e.name,onDelete:function(){return function(e,t){return fetch("".concat(j,"/instances/").concat(e,"/tags/").concat(t),{method:"DELETE",headers:{"content-type":"application/json",authorization:"bearer ".concat(p.getAuthToken())}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(e){O(!1),d(Object(G.a)(Object(G.a)({},r),{},{tags:r.tags.filter((function(e){return e.name!==t}))}))}))}(r.id,e.name)}},e.id)}))}),Object(F.jsx)("p",{}),Object(F.jsx)("div",{className:t.instanceDetailsCodeMirror,children:r.locked||!H?Object(F.jsx)(Ce.UnControlled,{className:t.instanceDetailsCodeMirror,value:g||"",options:{lineWrapping:!0,mode:"scheme",theme:"material",lineNumbers:!0,matchBrackets:!0,autoCloseBrackets:!0,styleActiveLine:!0}}):Object(F.jsx)(Ce.UnControlled,{className:t.instanceDetailsCodeMirror,value:g||"",options:{lineWrapping:!0,mode:"scheme",theme:"material",lineNumbers:!0,matchBrackets:!0,autoCloseBrackets:!0,styleActiveLine:!0},onChange:function(e,t,n){d(Object(G.a)(Object(G.a)({},r),{},{text:n})),setTimeout((function(){je((function(){return ue(Object(G.a)(Object(G.a)({},r),{},{text:n}))}),Q)}),500)}})})]}):Object(F.jsx)("div",{role:"alert",children:q?Object(F.jsx)("p",{className:"red",children:q}):null})]})}var kt=n(302),Nt=n(303),St=n(304),It=n(305),Tt=n(306),Pt=n(157),Dt=n.n(Pt),Bt=function(e){var t=A(),n=Object(l.g)(),a=c.a.useState(!1),i=Object(o.a)(a,2),s=i[0],r=i[1],d="!!run "+e.instance.id,j=c.a.useState(null),u=Object(o.a)(j,2),h=u[0],b=u[1],p=Boolean(h),O=c.a.useState("Click To Copy"),f=Object(o.a)(O,2),g=f[0],C=f[1],w=function(){r(!s)},N=function(){b(null),C("Click To Copy")};return Object(F.jsx)(y.a,{className:"Card Frame",item:!0,xs:12,sm:6,md:4,children:Object(F.jsxs)(kt.a,{className:t.instanceCardCard,children:[Object(F.jsx)(Nt.a,{avatar:Object(F.jsx)(le.a,{title:"".concat(e.instance.author),placement:"top",children:Object(F.jsx)(m.a,{onClick:function(){return n.push("/mages/".concat(e.instance.user_id))},children:Object(F.jsx)(x.a,{"aria-label":"recipe",className:t.instanceCardAvatar,children:e.instance.author.slice(0,1).toUpperCase()})})}),action:Object(F.jsx)(le.a,{title:"View Details",placement:"top",children:Object(F.jsx)(Y.a,{"aria-label":"settings",onClick:function(){return n.push("/instances/".concat(e.instance.id))},children:Object(F.jsx)(Dt.a,{})})}),title:pe(e.instance.name,19),subheader:new Date(Date.parse(e.instance.date_modified)).toLocaleDateString()}),Object(F.jsx)(St.a,{className:t.instanceCardCardMedia,image:"https://i.imgur.com/KEPVIOS.jpg",title:"Image title"+e.instance.id}),Object(F.jsx)(It.a,{children:Object(F.jsx)(k.a,{children:pe(e.instance.description,30)})}),Object(F.jsx)("div",{className:t.instanceCardChip,children:e.instance.tags.map((function(e){return Object(F.jsx)(ge.a,{variant:"outlined",size:"small",label:e.name},"tags "+e.id)}))}),Object(F.jsxs)(Tt.a,{className:t.instanceCardFooter,children:[Object(F.jsx)(le.a,{title:"Fork Instance",placement:"top",children:Object(F.jsx)(Y.a,{onClick:function(){return t=e.instance.id,void de.forkInstanceById(t).then((function(e){n.push("/instances/".concat(e.id))}));var t},children:Object(F.jsx)(vt.a,{})})}),e.instance.locked?Object(F.jsx)(ke.a,{}):"","ID: ",e.instance.id,Object(F.jsx)(le.a,{title:"View Code",placement:"top",children:Object(F.jsx)(Y.a,{className:Object(be.a)(t.instanceCardExpand,Object(T.a)({},t.instanceCardExpandOpen,s)),onClick:w,"aria-expanded":s,"aria-label":"show more",children:Object(F.jsx)(ye.a,{})})})]}),Object(F.jsxs)(ce.a,{open:s,onClose:w,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(F.jsx)("div",{className:t.cardHead,children:Object(F.jsx)(oe.a,{id:"alert-dialog-title",children:"".concat(e.instance.name)})}),Object(F.jsxs)("div",{className:t.cardHead,children:[Object(F.jsx)(v.a,{size:"small",className:t.copy,id:"read-only-twitch-command",label:"Twitch Dictum",defaultValue:d,InputProps:{readOnly:!0},variant:"outlined","aria-owns":p?"mouse-over-popover":void 0,"aria-haspopup":"true",onMouseEnter:function(e){b(e.currentTarget)},onMouseLeave:N,onClick:function(){navigator.clipboard.writeText(d),C("Copied!")}}),Object(F.jsx)(Ne.a,{id:"mouse-over-popover",className:t.instanceCardPopover,classes:{paper:t.instanceCardPaper},open:p,anchorEl:h,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:N,disableRestoreFocus:!0,children:Object(F.jsx)(k.a,{children:g})})]}),Object(F.jsx)(se.a,{className:"dialogBox",children:Object(F.jsx)(re.a,{id:"CodeMirror-Display",children:Object(F.jsx)(Ce.UnControlled,{className:t.codeMirror,value:e.instance.text,options:{lineWrapping:!0,mode:"scheme",theme:"material",lineNumbers:!0,matchBrackets:!0,autoCloseBrackets:!0,styleActiveLine:!0}})})})]})]})},"Frame "+e.instance.id)},At=Object(P.a)((function(e){return{cardGrid:{paddingTop:e.spacing(8),paddingBottom:e.spacing(8)}}})),Ft=function(e){var t=At(),n=Object(a.useState)(void 0),c=Object(o.a)(n,2),i=c[0],s=(c[1],Object(a.useState)(void 0)),r=Object(o.a)(s,2);r[0],r[1];return Object(F.jsx)(N.a,{className:t.cardGrid,maxWidth:"md",children:Object(F.jsx)(y.a,{container:!0,spacing:4,children:e.instances.map((function(e){return Object(F.jsx)(Bt,{cardImage:i,instance:e},"key "+e.id)}))})})};function Lt(e){var t=Object(a.useState)([]),n=Object(o.a)(t,2),i=n[0],s=n[1],r=A(),l=c.a.useState(9),d=Object(o.a)(l,2),j=d[0],u=(d[1],c.a.useState(0)),h=Object(o.a)(u,2),b=h[0],p=h[1],O=Object(a.useState)(1),f=Object(o.a)(O,2),x=f[0],m=f[1],g=c.a.useState(""),v=Object(o.a)(g,2),y=v[0],C=v[1];return Object(a.useEffect)((function(){var e=!0;return de.getPublicInstances(x,y).then((function(t){e&&(s(t.instances),p(t.total))})),function(){e=!1}}),[x,y]),Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)("div",{className:r.headBar,children:[Object(F.jsx)("div",{className:r.headLeft}),Object(F.jsx)("div",{className:r.headTitle,children:"Public Instances"}),Object(F.jsx)("div",{className:r.headRight,children:Object(F.jsx)(Oe,{setSearch:C,setCurrentPage:m})})]}),Object(F.jsx)(Ft,{instances:i}),Object(F.jsx)(K,{children:Object(F.jsx)("div",{className:r.publicInstancesRoot,children:Object(F.jsx)(fe.a,{count:Math.ceil(b/j),onChange:function(e,t){m(t)}})})})]})}var Et=function(e){var t=A(),n=Object(a.useState)(void 0),i=Object(o.a)(n,2),s=i[0],r=i[1],l=c.a.useState(10),d=Object(o.a)(l,2),j=d[0],u=(d[1],Object(a.useState)(1)),h=Object(o.a)(u,2),b=h[0],p=h[1],O=c.a.useState(""),f=Object(o.a)(O,2),x=f[0],m=f[1],g=window.location.pathname;return Object(a.useEffect)((function(){var t=!0,n=e.match.params.id;return de.getUserById(n,b,x).then((function(e){t&&r(e)})),function(){t=!1}}),[b,x,g]),s?Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)("div",{className:t.userProfileHeadBar,children:[Object(F.jsx)("div",{className:t.userProfileHeadLeft}),Object(F.jsx)("div",{className:t.userProfileHeadTitle,children:"Instances of ".concat(s.username)}),Object(F.jsx)("div",{className:t.userProfileHeadRight,children:Object(F.jsx)(Oe,{setSearch:m})})]}),Object(F.jsx)(Ft,{instances:s.instances}),Object(F.jsx)("div",{className:t.userProfileRoot,children:Object(F.jsx)(fe.a,{count:Math.ceil(s.total/j),onChange:function(e,t){p(t)}})})]}):""},Rt=function(e){return Object(F.jsxs)("div",{children:[Object(F.jsx)("h2",{children:"404 - Page not found"}),Object(F.jsx)("p",{children:"How did you even get here? That's not supposed to happen."})]})};Rt.defaultProps={history:{push:function(){}}};var Mt,zt=Rt,Ut=n(53),Ht=n.n(Ut),Wt=n(90),Gt=n(91),Vt="e47a164284a24bae83839c6898f434d9",_t=Object(Gt.createClient)({mode:"rtc",codec:"vp8"}),Jt=Object(Gt.createMicrophoneAndCameraTracks)(),qt=function(e){var t=e.setInCall,n=e.channelName,c=Object(a.useState)([]),i=Object(o.a)(c,2),s=i[0],r=i[1],l=Object(a.useState)(!1),d=Object(o.a)(l,2),j=d[0],u=d[1],h=_t(),b=Jt(),p=b.ready,O=b.tracks;return Object(a.useEffect)((function(){var e=function(){var e=Object(Wt.a)(Ht.a.mark((function e(t){return Ht.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.on("user-published",function(){var e=Object(Wt.a)(Ht.a.mark((function e(t,n){var a;return Ht.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.subscribe(t,n);case 2:console.log("subscribe success"),"video"===n&&r((function(e){return[].concat(Object(W.a)(e),[t])})),"audio"===n&&(null===(a=t.audioTrack)||void 0===a||a.play());case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),h.on("user-unpublished",(function(e,t){var n;(console.log("unpublished",e,t),"audio"===t)&&(null===(n=e.audioTrack)||void 0===n||n.stop());"video"===t&&r((function(t){return t.filter((function(t){return t.uid!==e.uid}))}))})),h.on("user-left",(function(e){console.log("leaving",e),r((function(t){return t.filter((function(t){return t.uid!==e.uid}))}))})),e.next=5,h.join(Vt,t,"006e47a164284a24bae83839c6898f434d9IABtii4C33WW3++LZVeMYC3GAPl7nDwokb9xUHIrtJYlY4a0dcYAAAAAEACZ/16CsubJYgEAAQCy5sli",null);case 5:if(!O){e.next=8;break}return e.next=8,h.publish([O[0],O[1]]);case 8:u(!0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();p&&O&&(console.log("init ready"),e(n))}),[n,h,p,O]),Object(F.jsxs)("div",{className:"App",children:[p&&O&&Object(F.jsx)(Yt,{tracks:O,setStart:u,setInCall:t}),j&&O&&Object(F.jsx)(Kt,{users:s,tracks:O})]})},Kt=function(e){var t=e.users,n=e.tracks;return Object(F.jsx)("div",{children:Object(F.jsxs)("div",{id:"videos",style:{display:"flex",width:"100%",height:"100%",flexShrink:"3",justifyContent:"center",borderRadius:"20px"},children:[Object(F.jsx)(Gt.AgoraVideoPlayer,{style:{display:"flex",height:"200px",width:"300px",borderRadius:"20px"},videoTrack:n[1]}),t.length>0&&t.map((function(e){return e.videoTrack?Object(F.jsx)(Gt.AgoraVideoPlayer,{style:{display:"flex",height:"200px",width:"300px",borderRadius:"20px"},videoTrack:e.videoTrack},e.uid):null}))]})})},Yt=function(e){var t=_t(),n=e.tracks,c=e.setStart,i=e.setInCall,s=Object(a.useState)({video:!0,audio:!0}),r=Object(o.a)(s,2),l=r[0],d=r[1],j=function(){var e=Object(Wt.a)(Ht.a.mark((function e(t){return Ht.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("audio"!==t){e.next=6;break}return e.next=3,n[0].setEnabled(!l.audio);case 3:d((function(e){return Object(G.a)(Object(G.a)({},e),{},{audio:!e.audio})})),e.next=10;break;case 6:if("video"!==t){e.next=10;break}return e.next=9,n[1].setEnabled(!l.video);case 9:d((function(e){return Object(G.a)(Object(G.a)({},e),{},{video:!e.video})}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(Wt.a)(Ht.a.mark((function e(){return Ht.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.leave();case 2:t.removeAllListeners(),n[0].close(),n[1].close(),c(!1),i(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(F.jsxs)("div",{className:"controls",children:[Object(F.jsx)("button",{className:l.audio?"on":"",onClick:function(){return j("audio")},children:l.audio?"MuteAudio":"UnmuteAudio"}),Object(F.jsx)("button",{className:l.video?"on":"",onClick:function(){return j("video")},children:l.video?"MuteVideo":"UnmuteVideo"}),Object(F.jsx)("br",{}),Object(F.jsx)("button",{onClick:function(){return u()},children:"Leave"})]})},Zt=function(e){var t=e.setInCall,n=e.setChannelName;return Object(F.jsxs)("form",{className:"join",children:[!1,Object(F.jsx)("input",{type:"text",autoFocus:!0,placeholder:"Enter Channel Name",onChange:function(e){return n(e.target.value)}}),Object(F.jsx)("button",{onClick:function(e){e.preventDefault(),t(!0)},children:"Join"})]})},Qt=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(""),s=Object(o.a)(i,2),r=s[0],d=s[1],u=A(),h=Object(a.useState)(),b=Object(o.a)(h,2),O=b[0],f=b[1],x=Object(a.useState)(!1),m=Object(o.a)(x,2),g=(m[0],m[1]),v=Object(l.h)().id,y=Object(a.useState)(void 0),C=Object(o.a)(y,2),w=C[0];C[1];return Object(F.jsxs)("div",{style:{height:"85vh"},children:[Object(F.jsx)("h1",{className:"heading",children:"Kitsap Chat"}),n?Object(F.jsx)(qt,{setInCall:c,channelName:r}):Object(F.jsx)(Zt,{setInCall:c,setChannelName:d}),Object(F.jsx)(Ce.UnControlled,{className:u.instanceDetailsCodeMirror,value:w||"",options:{lineWrapping:!0,mode:"scheme",theme:"material",lineNumbers:!0,matchBrackets:!0,autoCloseBrackets:!0,styleActiveLine:!0},onChange:function(e,t,n){f(Object(G.a)(Object(G.a)({},O),{},{text:n})),setTimeout((function(){var e,t;e=function(){return function(e){g(!0);var t=e;return fetch("".concat(j,"/instances/").concat(v),{method:"PUT",headers:{"content-type":"application/json",authorization:"bearer ".concat(p.getAuthToken())},body:JSON.stringify(t)}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(e){setTimeout((function(){g(!1)}),1e3),f(e)}))}(Object(G.a)(Object(G.a)({},O),{},{text:n}))},t=2e3,clearTimeout(Mt),Mt=setTimeout((function(){return e()}),t)}),500)}})]})},Xt=n(158),$t=n(159),en=function(e){var t=Object(a.useState)(new $t.a(e.data)),n=Object(o.a)(t,2),c=n[0],i=n[1];return console.log(c.fen()),Object(F.jsx)(Xt.a,{position:c.fen(),getPositionObject:console.log,onPieceDrop:function(e,t){var n=Object(G.a)({},c);n.move({from:e,to:t,promotion:"q"});i(n)}})},tn=function(e){return Object(F.jsx)(Qt,{})},nn=function(e){var t=Object(l.h)(),n=t.id,c=t.view_id,i=Object(a.useState)(void 0),s=Object(o.a)(i,2),r=s[0],d=s[1],j=Object(a.useState)(null),u=Object(o.a)(j,2),h=(u[0],u[1]);return Object(a.useEffect)((function(){de.getInstanceById(n).then((function(e){d(e.text)})).catch((function(e){h(e.error)}))}),[c]),"chess"==c&&r?Object(F.jsx)(en,{data:r}):"video-call"===c&&r?Object(F.jsx)(tn,{data:r}):Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("h1",{children:"No view selected...  But here's your data!"}),Object(F.jsx)("p",{children:r})]})};n(222);var an=Object(P.a)((function(e){return{root:{display:"flex",flexWrap:"wrap","& > *":{margin:e.spacing(2),width:e.spacing(50),height:e.spacing(50)}}}})),cn=function(){an();var e=Object(a.useState)(void 0),t=Object(o.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){de.getUserById("me").then((function(e){return c(!0)})).catch((function(){return c(!1)}))}),[]),Object(F.jsx)("div",{className:"App",children:Object(F.jsx)("div",{children:Object(F.jsxs)(l.d,{children:[Object(F.jsx)(l.b,{exact:!0,path:"/",component:function(e){return Object(F.jsx)(H,{isLoggedIn:n})}}),Object(F.jsx)(l.b,{exact:!0,path:"/panel.html",component:function(e){return Object(F.jsx)(H,{isLoggedIn:n})}}),Object(F.jsx)(l.b,{path:"/signup",component:U}),Object(F.jsx)(l.b,{path:"/login",component:M}),Object(F.jsx)(l.b,{path:"/instances/:id/views/:view_id",component:function(e){return Object(F.jsx)(ot,{child:Object(F.jsx)(nn,{}),isLoggedIn:n})}}),Object(F.jsx)(l.b,{path:"/instances/:id",component:function(e){return Object(F.jsx)(ot,{child:Object(F.jsx)(wt,{}),isLoggedIn:n})}}),Object(F.jsx)(l.b,{path:"/instances",component:function(e){return Object(F.jsx)(Ot,{isLoggedIn:n,setIsLoggedIn:c})}}),Object(F.jsx)(l.b,{path:"/friends",component:function(e){return Object(F.jsx)(ot,{child:Object(F.jsx)("div",{children:"Friends Coming Soon"})})}}),Object(F.jsx)(l.b,{path:"/gallery",component:function(e){return Object(F.jsx)(ot,{child:Object(F.jsx)(Lt,{}),isLoggedIn:n})}}),Object(F.jsx)(l.b,{path:"/mages/:id",component:function(e){return Object(F.jsx)(ot,{child:Object(F.jsx)(Et,{match:e.match})})}}),Object(F.jsx)(l.b,{component:function(e){return Object(F.jsx)(ot,{child:Object(F.jsx)(zt,{})})}})]})})})},sn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,316)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),i(e),s(e)}))};s.a.render(Object(F.jsx)(r.a,{children:Object(F.jsx)(cn,{})}),document.getElementById("root")),sn()}},[[223,1,2]]]);
//# sourceMappingURL=main.0072eb97.chunk.js.map